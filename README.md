# Интерактивный помощник для составления заявлений на получение социальных выплат

## Описание проекта

Десктопное приложение, разработанное на C++ с использованием фреймворка Qt, предназначенное для автоматизации процесса подачи заявлений на социальные выплаты. Система поддерживает два типа пользователей:

- **Заявители** — могут регистрироваться, заполнять личные данные, подавать заявления на выплаты, отслеживать статус заявок, просматривать и сохранять справки.
- **Сотрудники** — обрабатывают заявки, проверяют документы, принимают или отклоняют заявления, формируют справки и управляют данными филиалов.

База данных реализована на **PostgreSQL**, интерфейс — с помощью **Qt Widgets**.

## Основные возможности

### Для заявителей:
- Регистрация и аутентификация
- Заполнение персональных данных (ФИО, паспорт, СНИЛС, полис ОМС, адреса, банковские реквизиты)
- Подача заявлений на социальные выплаты
- Просмотр истории заявок с фильтрацией
- Просмотр и сохранение справок в формате PDF

### Для сотрудников:
- Просмотр и фильтрация заявок, назначенных на сотрудника
- Принятие или отклонение заявлений с подтверждением паролем
- Формирование справок о выплатах в формате PDF
- Управление данными филиалов и отделов
- Генерация официальных документов с использованием шаблонов

## Технологический стек

- **Язык программирования:** C++ (стандарт C++17)
- **Фреймворк:** Qt 6.9.3 (Widgets, SQL, Printsupport)
- **СУБД:** PostgreSQL (с использованием хранимых процедур и функций)
- **Система сборки:** qmake
- **Архитектура:** Модель-представление (QAbstractTableModel, QSortFilterProxyModel)
- **Контроль версий:** Git
- **ОС:** Windows (также возможно на Linux с поддержкой Qt)

## Установка и настройка

### 1. Установка зависимостей

1. Установите **Qt Creator** (версия 6.9.3 или выше) с компонентами:
   - Qt Widgets
   - Qt SQL (драйвер для PostgreSQL)
   - Qt Printsupport (для генерации PDF)

2. Установите **PostgreSQL** и создайте базу данных:
   ```sql
   CREATE DATABASE social_payments_assistant;
   ```

3. Импортируйте схему БД из приложенного SQL-файла **social_payments_assistant.sql**.

### 2. Настройка системных переменных

Добавьте пути к установленному PostgreSQL в переменную окружения `PATH`:
- `C:\Program Files\PostgreSQL\<версия>\bin`
- `C:\Program Files\PostgreSQL\<версия>\lib`
- `C:\Program Files\PostgreSQL\<версия>\include`

### 3. Сборка проекта

1. Клонируйте репозиторий:
   ```bash
   git clone <адрес репозитория>
   cd SocialPaymentsAssistant
   ```

2. Откройте файл `SocialPaymentsAssistant.pro` в Qt Creator.

3. Убедитесь, что в файле проекта подключены необходимые модули:
   ```
   QT += core gui sql printsupport widgets
   CONFIG += c++17
   ```

4. Настройте подключение к БД в файле `main.cpp`:
   ```cpp
   db.setHostName("localhost");
   db.setDatabaseName("social_payments_assistant");
   db.setUserName("postgres");
   db.setPassword("postgres");
   ```

5. Соберите проект в режиме Release или Debug.

## Запуск программы

После сборки запустите исполняемый файл `SocialPaymentsAssistant.exe`. Откроется окно входа в систему.

### Тестовые данные:
- Для входа как заявитель или сотрудник используйте учётные данные, созданные при регистрации.
- Первый запуск требует регистрации нового пользователя.

## Структура проекта

```
SocialPaymentsAssistant/

├── about.[h/cpp/ui]                      # Окно "О программе"
├── applicantreg.[h/cpp/ui]               # Регистрация заявителя
├── branchofficeslist.[h/cpp/ui]          # Список филиалов
├── empmainwindow.[h/cpp/ui]              # Главное окно сотрудника
├── empreg.[h/cpp/ui]                     # Регистрация сотрудника
├── loginwidget.[h/cpp/ui]                # Окно входа
├── mainwindow.[h/cpp/ui]                 # Главное окно заявителя
├── newapplication.[h/cpp/ui]             # Создание новой заявки
├── registrationwidget.[h/cpp/ui]         # Выбор роли при регистрации
├── myapplicationsmodel.[h/cpp]           # Модель "Мои заявки"
├── acceptedapplicationsmodel.[h/cpp]     # Модель "Принятые заявки"
├── empapplicationsmodel.[h/cpp]          # Модель "Заявки сотрудника"
├── branchofficeslistmodel.[h/cpp]        # Модель "Список филиалов"
├── applicationsproxymodel.[h/cpp]        # Прокси-модель для фильтрации
├── branchofficesproxymodel.[h/cpp]       # Прокси-модель для филиалов
├── pdfdocumentgenerator.[h/cpp]          # Генератор PDF-документов
├── main.cpp                              # Точка входа
├── tests/                                # Файлы тестов
│   ├── testloginwidgetwhitebox.[h/cpp]   # Тест белым ящиком
│   ├── testloginwidgetblackbox.[h/cpp]   # Тест черным ящиком
│   ├── testempregmodule.[h/cpp]          # Модульный тест
│   ├── testintegration.[h/cpp]           # Интеграционный тест
│   └── testload.[h/cpp]                  # Нагрузочный тест
├── SocialPaymentsAssistant.pro           # Файл проекта
├── social_payments_assistant.sql         # Бэкап БД с ее структурой
├── LICENSE                               # Лицензия MIT
└── README.md                             # Документация
```

## Архитектура и особенности реализации

- **Аутентификация**: Использование хранимой функции `authenticate_user` в PostgreSQL
- **Регистрация**: Хранимые процедуры `new_applicant` и `new_emp` для целостности данных
- **Модели данных**: Наследование от `QAbstractTableModel` для отображения табличных данных
- **Фильтрация**: Использование `QSortFilterProxyModel` для фильтрации и сортировки
- **Документооборот**: Генерация PDF-справок с помощью `QPrinter` и `QTextDocument`
- **Валидация**: Проверка данных на клиентской и серверной сторонах
- **Обработка сканов**: Загрузка и сохранение изображений документов в формате PNG

## Авторы

- **Хромов А.Е.** — тимлид, аналитик, программист, тестировщик, автор документации
- **Карташова В.А.** — аналитик
- **Горбунова Е.А.** — программист
- **Сафонова Д.А.** — программист
- **Тылик А.В.** — программист
- **Левшин С.С.** — научный руководитель

Воронежский государственный технический университет, Строительно-политехнический колледж, группа ИСП-234о.

Проект создан в учебных целях в рамках дисциплины "МДК.02.01 Технология разработки программного обеспечения".

---

### Примечания

- Для корректной работы требуется установленный драйвер PostgreSQL для Qt (QPSQL).
- Рекомендуется использовать сборку Qt с компилятором MinGW 64-bit.
- При возникновении ошибок подключения к БД проверьте правильность настроек хоста, порта и учётных данных.
- Для работы с PDF-документами необходим модуль Qt Printsupport.
- При регистрации заявителя требуются сканы документов в формате PNG.
